<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Professional Resume</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #f5f5f5;
        color: #333;
        line-height: 1.6;
        padding: 20px;
        text-transform: uppercase;
        display: flex;
        flex-direction: row;
      }

      .resume-container {
        max-width: 800px;
        margin: 0 auto;
        background-color: white;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        word-wrap: break-word; /* Ensure text breaks into the next line */
        overflow-wrap: break-word;
      }

      .resume-header {
        background-color: #2c3e50;
        color: white;
        padding: 30px 40px;
      }

      .resume-header h1 {
        font-size: 2.5rem;
        margin-bottom: 5px;
      }

      .resume-header h2 {
        font-size: 1.2rem;
        font-weight: 400;
        margin-bottom: 20px;
      }

      .contact-info {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        font-size: 0.9rem;
      }

      .contact-item {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .main-content {
        padding: 40px;
      }

      .section {
        margin-bottom: 30px;
      }

      .section-title {
        font-size: 1.4rem;
        color: #2c3e50;
        padding-bottom: 5px;
        margin-bottom: 15px;
        border-bottom: 2px solid #2c3e50;
      }

      .experience-item,
      .education-item {
        margin-bottom: 20px;
      }

      .job-title,
      .degree {
        font-weight: bold;
        font-size: 1.1rem;
        margin-bottom: 5px;
      }

      .company,
      .school {
        font-weight: 500;
        font-style: italic;
      }

      .date {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 10px;
      }

      .job-description,
      .education-description {
        padding-left: 15px;
      }

      .skills-list {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        list-style-type: none;
      }

      .skill-item {
        background-color: #eaeaea;
        padding: 5px 10px;
        border-radius: 3px;
        font-size: 0.9rem;
      }

      /* Responsive adjustments */
      @media (max-width: 600px) {
        .resume-header {
          padding: 20px;
        }

        .resume-header h1 {
          font-size: 2rem;
        }

        .main-content {
          padding: 20px;
        }
      }
      .controls {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin: 50px 0;
        padding: 10px;
      }

      .controls label {
        font-size: 16px;
        font-weight: 600;
        color: #003147;
      }

      .controls input[type="color"] {
        border: none;
        width: 40px;
        height: 30px;
        cursor: pointer;
        padding: 0;
        background: transparent;
      }

      .controls button {
        background-color: #003147;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 16px;
        border-radius: 5px;
      }

      .controls button:hover {
        background-color: #03a9f4;
      }
    </style>
  </head>
  <body>
    <div class="controls">
      <h2>Customize</h2>
      <label for="colorPicker">
        Background <input type="color" class="colorPicker" id="colorPicker"
      /></label>

      <label for="leftSidePicker">
        Text Color
        <input type="color" class="leftSidePicker" id="leftSidePicker"
      /></label>

      <button onclick="saveResume()">Save & Download</button>
      <a href="/user/dashboard">Home</a>
    </div>
    <div class="resume-container">
      <header class="resume-header">
        <h1><%= name %></h1>
        <h2><%= expert %></h2>
        <div class="contact-info">
          <div class="contact-item">
            <span>üìß</span>
            <span><%= email %></span>
          </div>
          <div class="contact-item">
            <span>üì±</span>
            <span><%= contact %></span>
          </div>
          <div class="contact-item">
            <span>üìç</span>
            <span><%= address %></span>
          </div>
          <div class="contact-item">
            <span>üîó</span>
            <span><%= linkedin %></span>
          </div>
        </div>
      </header>

      <main class="main-content">
        <section class="section" id="summary">
          <h2 class="section-title">Professional Summary</h2>
          <p><%= briefIntro %></p>
        </section>

        <section class="section" id="experience">
          <h2 class="section-title">Work Experience</h2>

          <div class="experience-item">
            <%experience.forEach(function(exp) { %>
            <div class="job-title"><%= exp.jobRole %>></div>
            <div class="company"><%= exp.companyName %>></div>
            <div class="date"><%= exp.expStart %>-<%= exp.expEnd %></div>
            <%= exp.jobDes %> <%} ) %>
          </div>
        </section>

        <section class="section" id="education">
          <h2 class="section-title">Education</h2>

          <div class="education-item">
            <% education.forEach(function (edu) { %>
            <div class="degree"><%= edu.degree %></div>
            <div class="school"><%= edu.uni %></div>
            <div class="date"><%= edu.start %> - <%= edu.end %></div>
            <% })%>
          </div>
        </section>

        <section class="section" id="skills">
          <h2 class="section-title">Skills</h2>
          <ul class="skills-list">
            <% skills.forEach(function (skill) {%> <%- console.log(skill)%>
            <li class="skill-item"><%=skill.skillName%></li>
            <% }) %>
          </ul>
        </section>

        <section class="section" id="certifications">
          <h2 class="section-title">Interests</h2>
          <ul>
            <% interests.forEach(function (interest){ %>
            <li><%= interest %></li>
            <%}) %>
          </ul>
        </section>
      </main>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
      document
        .getElementById("colorPicker")
        .addEventListener("input", function () {
          document.querySelector(".resume-header").style.backgroundColor =
            this.value;
        });

      document
        .getElementById("leftSidePicker")
        .addEventListener("input", function () {
          let elements = document.querySelectorAll(".section-title");
          elements.forEach((el) => {
            el.style.color = this.value;
          });
        });

      function saveResume() {
        const element = document.querySelector(".resume-container"); // Capture the entire resume container

        html2canvas(element, {
          scale: 2, // Increases resolution
          width: element.scrollWidth, // Ensures proper width
          height: element.scrollHeight, // Ensures full height
        }).then((canvas) => {
          const link = document.createElement("a");
          link.download = "template3.png";
          link.href = canvas.toDataURL("image/png");
          link.click();
        });
      }
    </script>
  </body>
</html>
